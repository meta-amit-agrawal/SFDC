public class SelectBillToContactPageController {
    
    public Opportunity opportunity {get; set;}
    public Id selectedContact{get; set;}
    
    public SelectBillToContactPageController(){
        this.opportunity = [SELECT Id, Manager__r.Name, BillToContact__c FROM Opportunity WHERE Id= :ApexPages.currentPage().getParameters().get('id')];
    }
    
    public List<Contact> getContacts(){
        List<Contact> contacts = [SELECT Id , Name, Account.Name FROM Contact WHERE AccountId=:opportunity.Manager__c];
        return contacts;
    }
    
    public List<SelectOption> getOptions(){
        List<SelectOption> options = new List<SelectOption>();
        for(Contact c: getContacts()){
            options.add(new SelectOption(c.id,c.Name));
        }
        return options;
    }
    
    public PageReference saveContact(){
        opportunity.BillToContact__c = selectedContact;
        update opportunity;
        PageReference page = new PageReference('/'+opportunity.Id);
        page.setRedirect(true);
        return page;
    }
    
    public PageReference cancelContact(){
        PageReference page = new PageReference('/'+opportunity.Id);
        page.setRedirect(true);
        return page;
    }
    
    public PageReference clearContact(){
        opportunity.BillToContact__c = null;
        update opportunity;
        PageReference page = new PageReference('/'+opportunity.Id);
        page.setRedirect(true);
        return page;
    }
    
    
}